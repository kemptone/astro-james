---
// Day/Night Cycle Gradient Game
import Menu from '@/components/menu.astro'
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Day/Night Cycle Game</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        max-width: 800px;
        margin: 0 auto;
        background: #f5f5f5;
      }

      .container {
        /* background: white; */
        /* padding: 30px; */
        /* border-radius: 8px; */
        /* box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); */
      }

      h1 {
        color: #333;
        text-align: center;
        margin-top: 0;
        display: none;
      }

      .controls {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        margin-bottom: 30px;
      }

      .time-input-group {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }

      label {
        font-size: 18px;
        font-weight: bold;
        color: #555;
      }

      input[type='time'] {
        padding: 10px;
        font-size: 24px;
        border: 2px solid #2196f3;
        border-radius: 4px;
        cursor: pointer;
      }

      button {
        padding: 12px 30px;
        font-size: 18px;
        font-weight: bold;
        background: #4caf50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background 0.2s;
      }

      button:hover {
        background: #45a049;
      }

      #gradientSquare {
        width: 100%;
        height: 400px;
        /* border-radius: 8px; */
        /* box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); */
        transition: background 0.3s ease;
      }

      .info {
        margin-top: 20px;
        padding: 15px;
        background: #e3f2fd;
        border-radius: 4px;
        font-size: 14px;
        line-height: 1.6;
        display: none;
      }

      .info strong {
        color: #1976d2;
      }

      .current-time-display {
        text-align: center;
        font-size: 48px;
        font-weight: bold;
        color: #333;
        margin: 20px 0;
        font-family: 'Courier New', monospace;
      }
    </style>
  </head>
  <body>
    <Menu />
    <div class="container">
      <h1>ðŸŒ… Day/Night Cycle Game ðŸŒ™</h1>

      <div class="controls">
        <div class="time-input-group">
          <!-- <label for="timeInput">Set the Time:</label> -->
          <input type="time" id="timeInput" value="12:00" />
        </div>
        <button id="submitTime">Submit Time</button>
      </div>

      <div id="gradientSquare"></div>

      <div class="info">
        <strong>How it works:</strong><br />
        â€¢ <strong>12:00 PM (Noon)</strong> - Completely white (full daylight)<br
        />
        â€¢ <strong>6:00 AM (Dawn)</strong> - Left side white, right side black (sunrise)<br
        />
        â€¢ <strong>6:00 PM (Dusk)</strong> - Left side black, right side white (sunset)<br
        />
        â€¢ <strong>12:00 AM (Midnight)</strong> - Completely black (total darkness)<br
        />
        â€¢ Times in between create unique asymmetric gradients!
      </div>
    </div>

    <script>
      const timeInput = document.getElementById('timeInput')
      const gradientSquare = document.getElementById('gradientSquare')

      function updateGradient() {
        const time = timeInput.value
        const [hours, minutes] = time.split(':').map(Number)

        // Convert to total minutes since midnight (0-1439)
        const totalMinutes = hours * 60 + minutes

        // Calculate the gradient based on time
        const gradient = calculateGradient(totalMinutes)
        gradientSquare.style.background = gradient

        // Reset the input field
        timeInput.value = '12:00'
      }

      function calculateGradient(totalMinutes) {
        // Key times in minutes since midnight:
        // Midnight: 0 (all black)
        // 6 AM: 360 (half white, half black)
        // Noon: 720 (all white)
        // 6 PM: 1080 (half black, half white)
        // Midnight: 1440 (all black)

        const midnight = 0
        const dawn = 360 // 6:00 AM
        const noon = 720 // 12:00 PM
        const dusk = 1080 // 6:00 PM
        const endOfDay = 1440 // 11:59 PM + 1 minute

        const white = 'rgb(255, 255, 255)'
        const black = 'rgb(0, 0, 0)'

        let whitePercent = 0

        if (totalMinutes <= noon) {
          // From midnight to noon: white grows from 0% to 100%
          whitePercent = (totalMinutes / noon) * 100
        } else {
          // From noon to midnight: white shrinks from 100% to 0%
          whitePercent = ((endOfDay - totalMinutes) / noon) * 100
        }

        // Clamp between 0 and 100
        whitePercent = Math.max(0, Math.min(100, whitePercent))
        const blackPercent = 100 - whitePercent

        if (whitePercent === 100) {
          // All white at noon
          return white
        } else if (whitePercent === 0) {
          // All black at midnight
          return black
        } else if (totalMinutes < noon) {
          // Morning: white on left grows, black on right shrinks
          return `linear-gradient(to right, ${white} 0%, ${white} ${whitePercent}%, ${black} ${whitePercent}%, ${black} 100%)`
        } else {
          // Evening: black on left grows, white on right shrinks
          return `linear-gradient(to right, ${black} 0%, ${black} ${blackPercent}%, ${white} ${blackPercent}%, ${white} 100%)`
        }
      }

      // Listen for submit button click
      document
        .getElementById('submitTime')
        .addEventListener('click', updateGradient)

      // Initialize with default time
      updateGradient()
    </script>
  </body>
</html>
