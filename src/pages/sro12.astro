---
import Menu3 from '@/components/Menu3/Menu3.astro'
---

<html>
  <head>
    <title>SRO12 - Switch Control</title>
  </head>
  <body>
    <Menu3 />
    <div class="container">
      <h1>SRO12 Switch Control</h1>

      <div class="switch-panel">
        <div class="switch" id="switch1">
          <div class="switch-label">Switch 1</div>
          <div class="switch-toggle" data-switch="1"></div>
        </div>
        <div class="switch" id="switch2">
          <div class="switch-label">Switch 2</div>
          <div class="switch-toggle" data-switch="2"></div>
        </div>
        <div class="switch" id="switch3">
          <div class="switch-label">Switch 3</div>
          <div class="switch-toggle" data-switch="3"></div>
        </div>
      </div>

      <form class="controls" method="dialog">
        <h3>Key Controls</h3>
        <span>
          <input type="number" name="number" required />
          <button>submit</button>
        </span>
      </form>
    </div>

    <script>
      const switches = {
        1: document.querySelector('[data-switch="1"]'),
        2: document.querySelector('[data-switch="2"]'),
        3: document.querySelector('[data-switch="3"]'),
      }

      function setSwitchState(switchNum, isOn) {
        const switchEl = switches[switchNum]
        if (isOn) {
          switchEl.classList.add('on')
        } else {
          switchEl.classList.remove('on')
        }
      }

      function setAllSwitches(state1, state2, state3) {
        setSwitchState(1, state1)
        setSwitchState(2, state2)
        setSwitchState(3, state3)
      }

      document.querySelector('form')?.addEventListener?.('submit', e => {
        const num = document.querySelector(
          'input[name="number"]'
        ) as HTMLInputElement

        const value = Number(num.value)

        switch (value) {
          case 23:
            // Switch 1 ON, 2 and 3 OFF
            setAllSwitches(true, false, false)
            break
          case 3:
            // Switches 1 and 2 ON, 3 OFF
            setAllSwitches(true, true, false)
            break
          case 0:
            // All switches ON
            setAllSwitches(true, true, true)
            break
          case 1:
            // Switch 1 OFF, 2 and 3 ON
            setAllSwitches(false, true, true)
            break
          case 12:
            // Only switch 3 ON, 1 and 2 OFF
            setAllSwitches(false, false, true)
            break
          case 123:
            // All switches OFF
            setAllSwitches(false, false, false)
            break
          case 13:
            // Only switch 2 ON, 1 and 3 OFF
            setAllSwitches(false, true, false)
            break
          case 2:
            // Switches 1 and 3 ON, 2 OFF (opposite of 7)
            setAllSwitches(true, false, true)
            break
        }
      })

      // Initialize all switches to OFF
      setAllSwitches(false, false, false)
    </script>
  </body>
</html>

<style>
  .container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    font-family: Arial, sans-serif;
  }

  h1 {
    text-align: center;
    color: #333;
  }

  .switch-panel {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin: 40px 0;
    padding: 20px;
    background: #f5f5f5;
    border-radius: 10px;
  }

  .switch {
    text-align: center;
  }

  .switch-label {
    font-weight: bold;
    margin-bottom: 10px;
    color: #333;
  }

  .switch-toggle {
    width: 60px;
    height: 100px;
    background: #ddd;
    border: 3px solid #333;
    border-radius: 10px;
    position: relative;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .switch-toggle::before {
    content: '';
    position: absolute;
    width: 40px;
    height: 40px;
    background: #666;
    border-radius: 50%;
    top: 50px;
    left: 50%;
    transform: translateX(-50%);
    transition: all 0.3s ease;
  }

  .switch-toggle.on {
    background: #4caf50;
  }

  .switch-toggle.on::before {
    top: 10px;
    background: #fff;
  }

  .instructions {
    background: #e8f4f8;
    padding: 20px;
    border-radius: 8px;
    margin-top: 30px;
  }

  .instructions h3 {
    margin-top: 0;
    color: #2c5f7a;
  }

  .instructions ul {
    list-style-type: none;
    padding: 0;
  }

  .instructions li {
    margin: 8px 0;
    padding: 5px;
    background: rgba(44, 95, 122, 0.1);
    border-radius: 4px;
  }

  .current-state {
    text-align: center;
    margin: 20px 0;
    font-size: 18px;
    font-weight: bold;
    color: #2c5f7a;
  }
  .controls {
    margin: 0 auto;
    width: fit-content;
  }
  .controls h3 {
    text-align: center;
  }
  input[name='number'] {
    width: 180px;
    padding: 1rem;
  }
</style>
